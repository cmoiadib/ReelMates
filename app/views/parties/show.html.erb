<div data-controller="party-subscription"
     data-party-subscription-party-id-value="<%= @party.id %>"
     class="container-fluid d-flex flex-column justify-content-around" style="min-height: 100vh; background: white; color: black; padding: 40px 0;">
  <% if @party.start == false %>
    <% if current_or_guest_user == @party.admin %>
      <!-- Top section -->
      <div class="text-center mt-3">
        <div class="mx-auto custom-box" style="max-width: 300px; background-color: #F66426; border-radius: 32px;">
          <h1><%= @party.party_code %></h1>
        </div>
      </div>

      <!-- Middle section -->
      <div class="text-center">
        <h3>Players</h3>
        <p class="h2 mt-3"><%= @party.party_players.count %></p>
      </div>

      <!-- Bottom section -->
      <div class="text-center" id="start-game-button">
        <%= link_to "Start game",
            start_party_path(@party),
            class: "btn button-orange shadow fw-bold",
            data: {
              action: "party-subscription#startGame",
              turbo: false
            } %>
      </div>
    <% else %>
      <!-- Non-admin view -->
      <div class="text-center">
        <h3>Players</h3>
        <p class="h2 mt-3"><%= @party.party_players.count %></p>
      </div>
    <% end %>
  <% else %>
    <!-- Party started view -->
    <div class="text-center">
      <h2>Party already started!</h2>
    </div>
  <% end %>
</div>


<style>
.custom-box {
  padding: 20px;
  border-radius: 8px;
  background: #F8F9FA;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
.btn-lg {
  padding: 12px 30px;
  font-size: 1.2rem;
}
</style>
